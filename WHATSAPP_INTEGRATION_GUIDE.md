# ุฏููู ุชูุงูู ุฑุณุงุฆู ุงููุงุชุณุงุจ - learnz

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูุงูู ูุธุงู ุฅุฑุณุงู ุฑุณุงุฆู ุงููุงุชุณุงุจ ูุน ุงูุชุทุจูู ุจุงุณุชุฎุฏุงู ุงูู Edge Function ุงูููุฌูุฏ `send-whatsapp-reminder`. ุงููุธุงู ูุฏุนู:

- ุฑุณุงุฆู ุชุฑุญูุจ ุชููุงุฆูุฉ ูููุณุชุฎุฏููู ุงูุฌุฏุฏ
- ุฑุณุงุฆู ูุฎุตุตุฉ ููุงุฎุชุจุงุฑ
- ุชุฐููุฑุงุช ุงูุญุตุต ุนุจุฑ ุงููุงุชุณุงุจ
- ุชุชุจุน ุงูุฑุณุงุฆู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุฑุณุงุฆู ุชุฑุญูุจ ุชููุงุฆูุฉ
- ุชุฑุณู ููุฑ ุชุณุฌูู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ
- ุชุญุชูู ุนูู ูุนูููุงุช ุนู ุงูููุตุฉ ููููุฒุงุชูุง
- ููุชูุจุฉ ุจุงููุบุฉ ุงูุนุฑุจูุฉ ูุน ุฑููุฒ ุชุนุจูุฑูุฉ

### 2. ุฑุณุงุฆู ูุฎุตุตุฉ
- ุฅููุงููุฉ ุฅุฑุณุงู ุฑุณุงุฆู ูุฎุตุตุฉ ููุงุฎุชุจุงุฑ
- ุฏุนู ุงููุตูุต ุงูุทูููุฉ
- ุชูุณูู ูุชุนุฏุฏ ุงูุฃุณุทุฑ

### 3. ุชุฐููุฑุงุช ุงูุญุตุต
- ุชุฐููุฑุงุช ุชููุงุฆูุฉ ูุจู ููุงุนูุฏ ุงูุญุตุต
- ูุนูููุงุช ููุตูุฉ ุนู ุงูุญุตุฉ (ุงูุงุณูุ ุงูููุชุ ุงูููุงู)
- ุชูุณูู ุฌููู ูุน ุฑููุฒ ุชุนุจูุฑูุฉ

## ููููุฉ ุงูุนูู

### 1. ุชุณุฌูู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ

ุนูุฏ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ:

1. ูุชู ุฅูุดุงุก ุงูุญุณุงุจ ูู Supabase Auth
2. ูุชู ุฅูุดุงุก ุงูููู ุงูุดุฎุตู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ูุชู ุงุณุชุฏุนุงุก `sendWelcomeWhatsAppMessage` ุชููุงุฆูุงู
4. ุชุฑุณู ุฑุณุงูุฉ ุชุฑุญูุจ ุนุจุฑ ุงููุงุชุณุงุจ

```typescript
// ูู AuthContext.tsx
const signup = async (name, email, password, phoneNumber) => {
  // ... ุฅูุดุงุก ุงูุญุณุงุจ ูุงูููู ุงูุดุฎุตู
  
  // ุฅุฑุณุงู ุฑุณุงูุฉ ุชุฑุญูุจ
  await sendWelcomeWhatsAppMessage(name, phoneNumber);
}
```

### 2. ุฑุณุงูุฉ ุงูุชุฑุญูุจ

```typescript
const welcomeMessage = `๐ ุฃููุงู ูุณููุงู ุจู ูู ููุตุฉ learnz|ููุฑูุฒ! 

ูุฑุญุจุงู ${userName}! ๐

ูุญู ุณุนุฏุงุก ูุงูุถูุงูู ุฅูู ูุฌุชูุนูุง ุงูุชุนูููู! ๐

๐ ูุน learnz|ููุฑูุฒ ููููู:
โข ุชูุธูู ุฌุฏููู ุงูุฏุฑุงุณู ุจุณูููุฉ
โข ุชุชุจุน ููุงูู ูููุงุนูุฏู
โข ุงูุญุตูู ุนูู ุชุฐููุฑุงุช ุฐููุฉ
โข ุงูุงุณุชูุงุฏุฉ ูู ุงููุณุงุนุฏ ุงูุฐูู ููุฏุฑุงุณุฉ

๐ ุงุจุฏุฃ ุฑุญูุชู ุงูุชุนููููุฉ ุงูุขู!

ุฅุฐุง ูุงู ูุฏูู ุฃู ุงุณุชูุณุงุฑุงุชุ ูุง ุชุชุฑุฏุฏ ูู ุงูุชูุงุตู ูุนูุง.

ูุชููู ูู ุชุฌุฑุจุฉ ุชุนููููุฉ ููุชุนุฉ ููููุฏุฉ! ๐โจ

ูุฑูู learnz|ููุฑูุฒ`;
```

### 3. ุงุณุชุฏุนุงุก Edge Function

```typescript
const response = await fetch('https://ymkatahxzfwiyhpzvxts.supabase.co/functions/v1/send-whatsapp-reminder', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    action: 'send_welcome_message',
    phoneNumber: phoneNumber,
    message: welcomeMessage
  })
});
```

## Edge Function ุงูููุฌูุฏ

### 1. ูุนูููุงุช ุงูู Function

- **ุงูุงุณู**: `send-whatsapp-reminder`
- **ุงูุญุงูุฉ**: ูุดุท (ACTIVE)
- **ุงูุฅุตุฏุงุฑ**: 71
- **ุงูุฑุงุจุท**: `https://ymkatahxzfwiyhpzvxts.supabase.co/functions/v1/send-whatsapp-reminder`

### 2. ุงูุฅุฌุฑุงุกุงุช ุงููุฏุนููุฉ

#### ุฃ) ุฅุฑุณุงู ุฑุณุงูุฉ ุชุฑุญูุจ
```json
{
  "action": "send_welcome_message",
  "phoneNumber": "+968XXXXXXXXX",
  "message": "ุฑุณุงูุฉ ุงูุชุฑุญูุจ"
}
```

#### ุจ) ุฅุฑุณุงู ุฑุณุงูุฉ ูุฎุตุตุฉ
```json
{
  "action": "send_message",
  "phoneNumber": "+968XXXXXXXXX",
  "message": "ุงูุฑุณุงูุฉ ุงููุฎุตุตุฉ"
}
```

#### ุฌ) ูุนุงูุฌุฉ ุงูุชุฐููุฑุงุช ุงููุฌุฏููุฉ
```json
{
  "action": "process_reminders"
}
```

### 3. ุงูุงุณุชุฌุงุจุฉ

```json
{
  "success": true,
  "message": "Message sent successfully"
}
```

## ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุดุงุดุฉ ุงุฎุชุจุงุฑ ุงููุงุชุณุงุจ

ุชู ุฅูุดุงุก ุดุงุดุฉ ุฎุงุตุฉ ูุงุฎุชุจุงุฑ ุฑุณุงุฆู ุงููุงุชุณุงุจ:

**ุงููุตูู**: ุงูุฅุนุฏุงุฏุงุช > ุฃุฏูุงุช ุงููุทูุฑ > ุงุฎุชุจุงุฑ ุงููุงุชุณุงุจ

### 2. ุงูุงุฎุชุจุงุฑุงุช ุงููุชุงุญุฉ

#### ุฃ) ุงุฎุชุจุงุฑ ุฑุณุงูุฉ ุชุฑุญูุจ
- ุฅุฏุฎุงู ุฑูู ุงููุงุชู
- ุงูุถุบุท ุนูู "ุฅุฑุณุงู ุฑุณุงูุฉ ุชุฑุญูุจ"
- ุณูุชู ุฅุฑุณุงู ุฑุณุงูุฉ ุชุฑุญูุจ ููุงุณูุฉ

#### ุจ) ุงุฎุชุจุงุฑ ุฑุณุงูุฉ ูุฎุตุตุฉ
- ุฅุฏุฎุงู ุฑูู ุงููุงุชู
- ูุชุงุจุฉ ุงูุฑุณุงูุฉ ุงููุฎุตุตุฉ
- ุงูุถุบุท ุนูู "ุฅุฑุณุงู ุฑุณุงูุฉ ูุฎุตุตุฉ"

### 3. ูุนูููุงุช ูููุฉ ููุงุฎุชุจุงุฑ

- **ุชูุณูู ุฑูู ุงููุงุชู**: `+968XXXXXXXXX`
- **ุงูุฑุตูุฏ ุงููุทููุจ**: ุชุฃูุฏ ูู ูุฌูุฏ ุฑุตูุฏ ูุงูู ูู ุญุณุงุจ ุงููุงุชุณุงุจ
- **ุงูููุช**: ูุฏ ุชุณุชุบุฑู ุงูุฑุณุงูุฉ ุจุถุน ุซูุงูู ูููุตูู

## ุฅุนุฏุงุฏุงุช ุงููุงุชุณุงุจ

### 1. ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุทููุจุฉ

```env
WHATSAPP_INSTANCE_ID=your_instance_id
WHATSAPP_ACCESS_TOKEN=your_access_token
```

### 2. API ุงููุณุชุฎุฏู

- **ุงูุฑุงุจุท**: `https://automapi.com/api/send`
- **ุงูููุน**: POST
- **ุงูุชูุณูู**: JSON

### 3. ุจูุงูุงุช ุงูุทูุจ

```json
{
  "number": "968XXXXXXXXX",
  "type": "text",
  "message": "ูุต ุงูุฑุณุงูุฉ",
  "instance_id": "your_instance_id",
  "access_token": "your_access_token"
}
```

## ุชุชุจุน ุงูุฑุณุงุฆู

### 1. ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

ุนูุฏ ุฅุฑุณุงู ุฑุณุงูุฉ ุจูุฌุงุญุ ูุชู ุฅูุดุงุก ุฅุดุนุงุฑ ูู ุฌุฏูู `notifications`:

```sql
INSERT INTO notifications (
  user_id,
  title,
  message,
  type
) VALUES (
  'user_id',
  'ุฑุณุงูุฉ ุชุฑุญูุจูุฉ',
  'ูุญุชูู ุงูุฑุณุงูุฉ...',
  'welcome'
);
```

### 2. ุฃููุงุน ุงูุฅุดุนุงุฑุงุช

- **welcome**: ุฑุณุงุฆู ุชุฑุญูุจ
- **whatsapp**: ุฑุณุงุฆู ูุงุชุณุงุจ ุนุงูุฉ
- **reminder**: ุชุฐููุฑุงุช ุงูุญุตุต

## ุฃูุถู ุงูููุงุฑุณุงุช

### 1. ุชูุณูู ุฃุฑูุงู ุงูููุงุชู

```typescript
// ุชูุณูู ุฑูู ุงููุงุชู
const formattedNumber = phoneNumber.replace(/[^\d]/g, '');
```

### 2. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

```typescript
try {
  const result = await sendWhatsAppMessage(phoneNumber, message);
  if (result.success) {
    console.log('Message sent successfully');
  } else {
    console.log('Failed to send message:', result.message);
  }
} catch (error) {
  console.error('Error sending message:', error);
}
```

### 3. ุชุฌูุจ ูุนุฏู ุงูุฅุฑุณุงู ุงูุนุงูู

```typescript
// ุฅุถุงูุฉ ุชุฃุฎูุฑ ุจูู ุงูุฑุณุงุฆู
await new Promise(resolve => setTimeout(resolve, 1000));
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### 1. ุงูุฑุณุงูุฉ ูุง ุชุตู

- ุชุญูู ูู ุตุญุฉ ุฑูู ุงููุงุชู
- ุชุฃูุฏ ูู ูุฌูุฏ ุฑุตูุฏ ูุงูู
- ุชุญูู ูู ุฅุนุฏุงุฏุงุช ุงููุงุชุณุงุจ API

### 2. ุฎุทุฃ ูู ุงูุงุณุชุฏุนุงุก

- ุชุญูู ูู ุตุญุฉ URL
- ุชุฃูุฏ ูู ุชูุณูู JSON
- ุฑุงุฌุน ุณุฌูุงุช Edge Function

### 3. ูุดุงูู ูู ุงูุชูููุช

- ูุฏ ุชุณุชุบุฑู ุงูุฑุณุงูุฉ ุจุถุน ุซูุงูู
- ุชุญูู ูู ุญุงูุฉ ุงูุฎุงุฏู
- ุฑุงุฌุน ุณุฌูุงุช ุงููุธุงู

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### 1. ููุฒุงุช ูุฎุทุทุฉ

- **ุฑุณุงุฆู ุชูุงุนููุฉ**: ุฃุฒุฑุงุฑ ุชูุงุนููุฉ ูู ุงูุฑุณุงุฆู
- **ููุงูุจ ูุชุนุฏุฏุฉ**: ููุงูุจ ูุฎุชููุฉ ููุฑุณุงุฆู
- **ุฌุฏููุฉ ุงูุฑุณุงุฆู**: ุฅุฑุณุงู ุฑุณุงุฆู ูู ุฃููุงุช ูุญุฏุฏุฉ
- **ุชุญูููุงุช ุงูุฑุณุงุฆู**: ุฅุญุตุงุฆูุงุช ุฅุฑุณุงู ุงูุฑุณุงุฆู

### 2. ุชุญุณููุงุช ููุชุฑุญุฉ

- **ุฏุนู ุงููุณุงุฆุท**: ุฅุฑุณุงู ุตูุฑ ููููุงุช
- **ุฑุณุงุฆู ุฌูุงุนูุฉ**: ุฅุฑุณุงู ูุนุฏุฉ ุฃุฑูุงู
- **ุชุฎุตูุต ุงูุฑุณุงุฆู**: ุฑุณุงุฆู ูุฎุตุตุฉ ุญุณุจ ุงููุณุชุฎุฏู
- **ุชูุงูู ูุน ุงูุชูููู**: ุชุฐููุฑุงุช ุฐููุฉ

## ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

### 1. ุญูุงูุฉ ุงูุจูุงูุงุช

- ุฃุฑูุงู ุงูููุงุชู ูุญููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงูุฑุณุงุฆู ูุง ุชุญุชูู ุนูู ูุนูููุงุช ุญุณุงุณุฉ
- ุงุณุชุฎุฏุงู HTTPS ูุฌููุน ุงูุทูุจุงุช

### 2. ุงูุงูุชุซุงู

- ุงุญุชุฑุงู ุฎุตูุตูุฉ ุงููุณุชุฎุฏููู
- ุนุฏู ุฅุฑุณุงู ุฑุณุงุฆู ุบูุฑ ูุฑุบูุจ ูููุง
- ุฅููุงููุฉ ุฅูุบุงุก ุงูุงุดุชุฑุงู

## ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### 1. ุงููููุงุช ุงููุฑุฌุนูุฉ

- `src/contexts/AuthContext.tsx`: ููุทู ุฅุฑุณุงู ุฑุณุงุฆู ุงูุชุฑุญูุจ
- `src/screens/WhatsAppTestScreen.tsx`: ุดุงุดุฉ ุงุฎุชุจุงุฑ ุงููุงุชุณุงุจ
- `src/screens/SignupScreen.tsx`: ุดุงุดุฉ ุงูุชุณุฌูู

### 2. ุงูุงุฎุชุจุงุฑ

- ุงุณุชุฎุฏู ุดุงุดุฉ ุงุฎุชุจุงุฑ ุงููุงุชุณุงุจ
- ุงุฎุชุจุฑ ูุน ุฃุฑูุงู ูุฎุชููุฉ
- ุชุญูู ูู ูุตูู ุงูุฑุณุงุฆู

### 3. ุงููุฑุงูุจุฉ

- ุฑุงุฌุน ุณุฌูุงุช Edge Function
- ุชุญูู ูู ุฌุฏูู ุงูุฅุดุนุงุฑุงุช
- ุฑุงูุจ ุญุงูุฉ API ุงููุงุชุณุงุจ

---

## ุงูุฎูุงุตุฉ

ุชู ุชูุงูู ูุธุงู ุฅุฑุณุงู ุฑุณุงุฆู ุงููุงุชุณุงุจ ุจูุฌุงุญ ูุน ุงูุชุทุจูู:

1. **ุฑุณุงุฆู ุชุฑุญูุจ ุชููุงุฆูุฉ** ูููุณุชุฎุฏููู ุงูุฌุฏุฏ
2. **ุดุงุดุฉ ุงุฎุชุจุงุฑ ุดุงููุฉ** ูุงุฎุชุจุงุฑ ุงูุฑุณุงุฆู
3. **ุชูุงูู ุณูุณ** ูุน ูุธุงู ุงูุชุณุฌูู
4. **ุชุชุจุน ุงูุฑุณุงุฆู** ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
5. **ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุชูุฏูุฉ** ููุฑุงูุจุฉ ุงูุญุงูุฉ

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ููููู ูููุณุชุฎุฏููู ุงูุฌุฏุฏ ุชููู ุฑุณุงุฆู ุชุฑุญูุจ ุชููุงุฆูุฉ ุนุจุฑ ุงููุงุชุณุงุจ ููุฑ ุชุณุฌูููู ูู ุงูุชุทุจูู.
