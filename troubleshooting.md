# دليل استكشاف الأخطاء - المزامنة

## 🔍 المشاكل الشائعة والحلول

### 1. البيانات لا تظهر في التقويم

**الأعراض:**
- التقويم فارغ
- لا تظهر الأحداث

**الحلول:**
1. **تحقق من تسجيل الدخول**
   - تأكد من أن المستخدم مسجل دخوله
   - تحقق من `user_id` في Console

2. **جرب المزامنة اليدوية**
   - اسحب الشاشة لأسفل في التقويم
   - راقب رسائل المزامنة

3. **تحقق من Console**
   - ابحث عن أخطاء في Developer Tools
   - راقب رسائل `DatabaseService`

### 2. Real-time لا يعمل

**الأعراض:**
- حالة الاتصال "غير متصل"
- البيانات لا تتحدث تلقائياً

**الحلول:**
1. **تحقق من Real-time في Supabase**
   - اذهب إلى Database > Replication
   - تأكد من تفعيل Real-time للجدول

2. **جرب إعادة الاتصال**
   - اضغط على مؤشر الاتصال
   - أعد تشغيل التطبيق

3. **استخدم Polling**
   - التطبيق سيتحول تلقائياً
   - ستظهر "مزامنة دورية"

### 3. أخطاء في اختبار المزامنة

**الأعراض:**
- اختبار المزامنة يفشل
- رسائل خطأ في النتائج

**الحلول:**
1. **تحقق من سياسات RLS**
   - تأكد من تطبيق السياسات
   - تحقق من صلاحيات المستخدم

2. **تحقق من اتصال الإنترنت**
   - تأكد من الاتصال بالإنترنت
   - جرب إعادة تشغيل التطبيق

3. **تحقق من سجلات Supabase**
   - اذهب إلى Logs في Supabase Dashboard
   - راقب أخطاء قاعدة البيانات

### 4. الأحداث لا تظهر في الأيام الصحيحة

**الأعراض:**
- الأحداث تظهر في أيام خاطئة
- أيام الأحداث لا تطابق

**الحلول:**
1. **تحقق من تنسيق الأيام**
   - تأكد من أن الأيام باللغة الإنجليزية
   - تحقق من الحروف الكبيرة/الصغيرة

2. **جرب إعادة المزامنة**
   - استخدم المزامنة اليدوية
   - أعد تشغيل التطبيق

### 5. مشاكل في إضافة أحداث جديدة

**الأعراض:**
- الأحداث لا تحفظ
- أخطاء عند الحفظ

**الحلول:**
1. **تحقق من البيانات المطلوبة**
   - تأكد من ملء جميع الحقول
   - تحقق من تنسيق الوقت

2. **تحقق من Console**
   - راقب رسائل `createEvent`
   - تحقق من أخطاء قاعدة البيانات

## 🛠️ أدوات التشخيص

### 1. Console Logs
```javascript
// افتح Developer Tools
// ابحث عن هذه الرسائل:
🔄 Setting up real-time subscription
✅ Real-time subscription established
📡 Real-time event received
❌ Error in database operation
```

### 2. اختبار المزامنة
- اذهب إلى الإعدادات > اختبار المزامنة
- اضغط "اختبار المزامنة"
- راقب النتائج

### 3. Supabase Dashboard
- اذهب إلى Logs
- راقب أخطاء قاعدة البيانات
- تحقق من Real-time

## 📞 الحصول على المساعدة

### 1. جمع المعلومات
- رسائل الخطأ من Console
- نتائج اختبار المزامنة
- لقطة شاشة للمشكلة

### 2. التحقق من الأساسيات
- تسجيل الدخول
- اتصال الإنترنت
- إعدادات Supabase

### 3. إعادة المحاولة
- أعد تشغيل التطبيق
- جرب المزامنة اليدوية
- تحقق من التحديثات

---

**ملاحظة**: معظم المشاكل يمكن حلها بإعادة تشغيل التطبيق أو استخدام المزامنة اليدوية.
